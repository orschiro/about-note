// Generated by CoffeeScript 1.4.0
(function(){var e,t,n,r,i;n={defaultFontSize:15,defaultFontFamily:"sans-serif"};e={editor:$("#editor"),editorBody:$("#editor .body"),setting:$("#setting"),btnTabDefault:$("#btnTabDefault")};t={temp:"",init:function(){var t=this;this.load();$(window).on("focus",function(){t.load();return t.focus()});$("body").on("click",function(n){var r;r=$(n.target).parents("#setting, #editor .body");if(r.length===0&&e.editorBody.text()==="")return t.focus()});e.editorBody.on("focus",function(){return t.temp=t.getContent()});e.editorBody.on("blur keyup paste",function(){var e;e=t.getContent();if(e!==t.temp){t.save();return t.temp=e}});localStorage.anContent||e.editorBody.html("<p>Write a note.</p>");return e.editorBody.attr("contenteditable","true")},getContent:function(){return e.editorBody.html()},save:function(){return localStorage.anContent=this.getContent()},load:function(){var t;t=this.getContent();if(t!==localStorage.anContent){e.editorBody.html(localStorage.anContent);return this.temp=t}},focus:function(){return e.editorBody.focus()}};r={init:function(){var t;t=this.load;t();e.setting.find("h1").on("click",function(){return e.setting.toggleClass("active")});$(window).on("click",function(t){var n;n=$(t.target).parents("#setting");if(n.length===0)return e.setting.removeClass("active")});e.setting.find("input[name=fontSize]").on("change",function(){localStorage.anFontSize=$(this).val();return t()});return e.setting.find("select[name=fontFamily]").on("change",function(){localStorage.anFontFamily=$(this).val();return t()})},load:function(){if(localStorage.anFontSize!=null){$("html").css("font-size",localStorage.anFontSize+"px");e.setting.find("input[name=fontSize]").val(localStorage.anFontSize)}if(localStorage.anFontFamily!=null&&!e.editor.hasClass(localStorage.anFontFamily)){e.editor.removeClass("sans-serif").removeClass("serif").addClass(localStorage.anFontFamily);return e.setting.find("select[name=fontFamily]").val(localStorage.anFontFamily)}}};i={init:function(){this.firstCancel();return e.btnTabDefault.on("click",function(){return chrome.tabs.update({url:"chrome-internal://newtab/"})})},firstCancel:function(){var e;e=!0;return $(window).on("keyup",function(t){return t.keyCode===27&&e?chrome.tabs.update({url:"chrome-internal://newtab/"}):e=!1})}};$(function(){t.init();r.init();return i.init()})}).call(this);